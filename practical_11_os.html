<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

        <style>
        body,html{
            width:100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }
        *{
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        h1{
            font-size: 3rem;
            color: red;
            font-style: italic;
            text-align: center;
            text-decoration: underline;
        }
        .container{
            width: 100%;
            height: auto;
            padding: 10px;
            border:4px dotted greenyellow;
        }
        p{
            font-size: x-large;
        }
        ul{
            font-size: x-large;
            padding-left: 25px ;
        }
        .code{
            width: 100%;
            height: auto;
            background-color: aliceblue;
            position: relative;
            overflow:auto;
            font-style: normal;
            font-size: large;
            border-radius: 2.5%;
        }
        #copyBtn{
            color:black;
            position: absolute;
            cursor: pointer;
            padding: 5px 10px;
            border:none;
            top:10px;
            right:10px;
        }
                /* media to responsive mobile  */
        @media (max-width:768px){
            *{
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }
            body,html{
                width: 100%;
                height: auto;
            }
            h1{
            font-size: 1rem;
            }
            P{
                font-size: large;
            }
            span{
                font-size: larger;
            }
            pre,code{
                width: 100%;
                overflow: auto;
            position: relative;
            }

        }
</style>
</head>
<body>
<div class="container">
        <h1>Practical No.-11</h1>
        <p>
    <span style="color:deeppink;">Aim:-</span>Simulate all file allocation strategies.<br> (a)- Siquential (b)- Indexed (c)- Linked<br>
    <span style="color:brown;">Requriment:-</span> Personal Computer or Laptop,C compiler (Turbo c++ or Visual Studio code with extension). <br>
     <span style="color:brown;">Procedure:-</span> <br>
        File Allocation Strategies-

     <!-- Sequential file allocation strategies-->
     <p>(a). Siquential</p><br>

     <div class="code"><button id="copyBtn" onclick="copycode()"><i class="fa-solid fa-copy"> copy code</i></button>
        <pre id="program">
         <code class="language-c">
    <span style="font-weight: 700;font-size: xx-large;">C</span>  
        #include <stdio.h>

int main() {
    int disk[300], i, choice, start, length, j;
    printf("=== Sequential File Allocation Simulation ===\n");
        printf("Sequential File Allocation performed by Kadir Alam\n");
    
    // Initialize disk with 0 (free blocks)
    for(i = 0; i < 300; i++)
        disk[i] = 0;

    while(1) {
        printf("\n1. Allocate File");
        printf("\n2. Display Disk Status");
        printf("\n3. Exit");
        printf("\nEnter your choice: ");
        scanf("%d", &choice);

        switch(choice) {

            case 1:
                printf("\nEnter the starting block and length of the file(Size in MB) Maximum 0-300MB: ");
                scanf("%d %d", &start, &length);

                // Check if blocks are free
                for(i = start; i < start + length; i++) {
                      if(start>300){
                            printf("Invalid Block Number.Please Enter the Block Number less than 300");
                            goto end;
                        }
                    if(disk[i] != 0) {
                        printf("Cannot allocate! Some blocks are already in use.\n");
                        goto end;
                    }
                }

                // Allocate file
                for(i = start, j = start; i < start + length; i++, j++)
                    disk[i] = j;

                printf("File allocated from block %d to %d.\n", start, start + length - 1);
                end:
                break;


            case 2:
                printf("\nDisk Status (0 = free, block numbers = allocated):\n");
                for(i = 0; i < 300; i++)
                    printf("%d ", disk[i]);
                printf("\n");
                break;

            case 3: {
                int allocated = 0, free = 0;

                for(i = 0; i < 300; i++) {
                    if(disk[i] == 0)
                        free++;
                    else
                        allocated++;
                }
                printf("Sequential File Allocation performed by Kadir Alam\n");
                printf("\nExiting Program...\n");
                printf("Total Blocks = 300\n");
                printf("Allocated Blocks = %d\n", allocated);
                printf("Free Blocks = %d\n", free);

                return 0;
            }

            default:
                printf("Invalid Choice\n");
        }
    }
    return 0;
}
</code>
        </pre>
</div>
        <!-- Indexed file allocation strategies-->
     <p>(b). Indexed</p><br>

     <div class="code"><button id="copyBtn" onclick="copycode()"><i class="fa-solid fa-copy"> copy code</i></button>
        <pre id="program">
         <code class="language-c">
    <span style="font-weight: 700;font-size: xx-large;">C</span>  
        #include <stdio.h>

int main() {
    int disk[300], i, choice, indexBlock, length, block, allocated = 0, free = 300;
    printf("==========INDEXED FILE ALLOCATION==========\n");
     printf("Indexed File Allocation performed by Kadir Alam\n");
     printf("Please enter the block number less than 300\n");

    // initialize disk
    for(i = 0; i <=300; i++)
        disk[i] = 0;

    while(1) {
        printf("\n1. Allocate File (Indexed)");
        printf("\n2. Display Disk Status");
        printf("\n3. Exit");
        printf("\nEnter your choice: ");
        scanf("%d", &choice);

        switch(choice) {

            case 1:
                printf("\nEnter Index Block Number: ");
                scanf("%d", &indexBlock);
                            if(indexBlock>300){
                            printf("Invalid Block Number.Please Enter the Block Number less than 300");
                            goto end;
                        }

                if(disk[indexBlock] != 0) {
                    
                    printf("Index block already allocated! Choose another.\n");
                    break;
                }

                printf("Enter Number of Blocks Required: ");
                scanf("%d", &length);

                disk[indexBlock] = indexBlock; // allocate index block
                                        if(length>300){
                            printf("Invalid Block Number.Please Enter the Block Number less than 300");
                            goto end;
                        }
                printf("Enter %d block numbers to allocate: ", length);
                for(i = 0; i < length; i++){
                    scanf("%d", &block);
                                        if(block>300){
                            printf("Invalid Block Number.Please Enter the Block Number less than 300");
                            goto end;
                        }
                    

                    if(disk[block] != 0){
                        printf("Block %d already allocated! Allocation failed.\n", block);
                        goto end;
                    }

                    disk[block] = block;
                }

                printf("File allocated using index block %d.\n", indexBlock);
                end:
                break;

            case 2:
                printf("\nDisk Status (0 = free, block number = allocated):\n");
                for(i = 0; i <= 300; i++)
                    printf("%d ", disk[i]);
                printf("\n");
                break;

            case 3:
                allocated = free = 0;
                for(i = 0; i < 300; i++){
                    if(disk[i] == 0) free++;
                    else allocated++;
                }
                printf("Indexed File Allocation performed by Kadir Alam\n");
                printf("\nAllocated Blocks = %d", allocated);
                printf("\nFree Blocks = %d\n", free);
                return 0;

            default:
                printf("Invalid Choice.\n");
        }
    }
}
</code>
        </pre>
</div>
<!-- Linked file allocation strategies-->
     <p>(c). Linked</p><br>

     <div class="code"><button id="copyBtn" onclick="copycode()"><i class="fa-solid fa-copy"> copy code</i></button>
        <pre id="program">
         <code class="language-c">
    <span style="font-weight: 700;font-size: xx-large;">C</span>  
        #include <stdio.h>

int main() {
    int disk[300], i, choice, start, length, next;
     printf("=== Linked File Allocation Simulation ===\n");
    printf("Linked File Allocation performed by Kadir Alam\n");

    // initialize disk
    for(i = 0; i < 300; i++)
        disk[i] = 0;

    while(1) {
        printf("\n1. Allocate File (Linked)");
        printf("\n2. Display Disk Status");
        printf("\n3. Exit");
        printf("\nEnter your choice: ");
        scanf("%d", &choice);

        switch(choice) {

            case 1:
                printf("\nEnter Starting Block: ");
                scanf("%d", &start);
                 if(start>300){
                            printf("Invalid Block Number.Please Enter the Block Number less than 300");
                            goto end;
                        }
 
                if(disk[start] != 0){
                    printf("Block already allocated.\n");
                    break;
                }

                printf("Enter Number of Blocks: ");
                scanf("%d", &length);
                 if(length>300){
                            printf("Invalid Block Number.Please Enter the Block Number less than 300");
                            goto end;
                        }
 

                int prev = start;
                disk[start] = -1;

                printf("Enter Remaining %d block numbers: ", length - 1);
                for(i = 1; i < length; i++) {
                    scanf("%d", &next);
                     if(length>300){
                            printf("Invalid Block Number.Please Enter the Block Number less than 300");
                            goto end;
                        }
 

                    if(disk[next] != 0){
                        printf("Block %d already allocated! Allocation failed.\n", next);
                        goto end;
                    }

                    disk[prev] = next;
                    prev = next;
                    disk[next] = -1;
                }

                printf("File allocated starting at block %d.\n", start);
                end:
                break;

            case 2:
                printf("\nDisk Status (0 = free, end pointer = last block, block# = next block):\n");
                for(i = 0; i < 300; i++)
                    printf("%d ", disk[i]);
                printf("\n");
                break;

            case 3: {
                int allocated = 0, free = 0;
                for(i = 0; i < 300; i++){
                    if(disk[i] == 0) free++;
                    else allocated++;
                }
                printf("Linked File Allocation performed by Kadir Alam\n");
                printf("\nAllocated Blocks = %d", allocated);
                printf(" \nFree Blocks = %d\n", free);
                return 0;
            }

            default:
                printf("Invalid Choice.\n");
        }
    }
}
</code>
        
        </pre>
</div>
</div>
<!--function call--> 
<script type="module">
 import { copycode } from './function.js';

 document.getElementById("copyBtn").addEventListener("click",copycode);
 </script>

</body>
</html>